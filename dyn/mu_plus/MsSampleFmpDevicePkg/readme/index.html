



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Project Mu Documentation">
      
      
        <link rel="canonical" href="https://microsoft.github.io/mu/dyn/mu_plus/MsSampleFmpDevicePkg/readme/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Ms Sample Fmp Device Pkg - Project Mu</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../../../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../../#sample-drivers-libraries-and-tools-for-the-capsule-update-feature" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://microsoft.github.io/mu/" title="Project Mu" class="md-header-nav__button md-logo">
          
            <img src="../../../../img/mu.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Project Mu
              </span>
              <span class="md-header-nav__topic">
                Ms Sample Fmp Device Pkg
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/microsoft/mu/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://microsoft.github.io/mu/" title="Project Mu" class="md-nav__button md-logo">
      
        <img src="../../../../img/mu.png" width="48" height="48">
      
    </a>
    Project Mu
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/microsoft/mu/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      What and Why
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        What and Why
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../WhatAndWhy/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../WhatAndWhy/layout/" title="Dependencies and Layout" class="md-nav__link">
      Dependencies and Layout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../WhatAndWhy/features/" title="Features" class="md-nav__link">
      Features
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Where
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Where
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Where/project_resources/" title="Project Resources" class="md-nav__link">
      Project Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Where/external_resources/" title="External Resources" class="md-nav__link">
      External Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      How
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        How
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../How/release_process/" title="Release Process" class="md-nav__link">
      Release Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../How/downstream_integration/" title="Downstream Integration" class="md-nav__link">
      Downstream Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../How/contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../How/upstream_integration/" title="Upstream Integration" class="md-nav__link">
      Upstream Integration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Developer Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Developer Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../DeveloperDocs/developer_docs/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../DeveloperDocs/build_community_docs/" title="How To Build" class="md-nav__link">
      How To Build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../DeveloperDocs/doc_sample_test/" title="Sample Syntax" class="md-nav__link">
      Sample Syntax
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../DeveloperDocs/docs_attribution/" title="Doc Framework Attribution" class="md-nav__link">
      Doc Framework Attribution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../DeveloperDocs/code_requirements/" title="Code Requirements" class="md-nav__link">
      Code Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../DeveloperDocs/doc_requirements/" title="Documentation Requirements" class="md-nav__link">
      Documentation Requirements
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Code Repositories
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Code Repositories
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1" type="checkbox" id="nav-8-1">
    
    <label class="md-nav__link" for="nav-8-1">
      mu basecore
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-1">
        mu basecore
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/Readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-2" type="checkbox" id="nav-8-1-2">
    
    <label class="md-nav__link" for="nav-8-1-2">
      Base Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-1-2">
        Base Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-2-1" type="checkbox" id="nav-8-1-2-1">
    
    <label class="md-nav__link" for="nav-8-1-2-1">
      Scripts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-1-2-1">
        Scripts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/BaseTools/Scripts/PackageDocumentTools/Readme/" title="Package Document Tools" class="md-nav__link">
      Package Document Tools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-2-2" type="checkbox" id="nav-8-1-2-2">
    
    <label class="md-nav__link" for="nav-8-1-2-2">
      Source
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-1-2-2">
        Source
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-2-2-1" type="checkbox" id="nav-8-1-2-2-1">
    
    <label class="md-nav__link" for="nav-8-1-2-2-1">
      C
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-8-1-2-2-1">
        C
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/BaseTools/Source/C/BrotliCompress/" title="Brotli Compress" class="md-nav__link">
      Brotli Compress
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-2-2-2" type="checkbox" id="nav-8-1-2-2-2">
    
    <label class="md-nav__link" for="nav-8-1-2-2-2">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-8-1-2-2-2">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/BaseTools/Source/Python/Pkcs7Sign/Readme/" title="Pkcs7 Sign" class="md-nav__link">
      Pkcs7 Sign
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-3" type="checkbox" id="nav-8-1-3">
    
    <label class="md-nav__link" for="nav-8-1-3">
      Mde Module Pkg
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-1-3">
        Mde Module Pkg
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-3-1" type="checkbox" id="nav-8-1-3-1">
    
    <label class="md-nav__link" for="nav-8-1-3-1">
      Library
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-1-3-1">
        Library
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/MdeModulePkg/Library/BrotliCustomDecompressLib/" title="Brotli Custom Decompress Lib" class="md-nav__link">
      Brotli Custom Decompress Lib
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/MsUnitTestPkg/ReadMe/" title="Ms Unit Test Pkg" class="md-nav__link">
      Ms Unit Test Pkg
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-5" type="checkbox" id="nav-8-1-5">
    
    <label class="md-nav__link" for="nav-8-1-5">
      Uefi Build
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-1-5">
        Uefi Build
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-5-1" type="checkbox" id="nav-8-1-5-1">
    
    <label class="md-nav__link" for="nav-8-1-5-1">
      Nuget Publishing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-1-5-1">
        Nuget Publishing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/UefiBuild/NugetPublishing/iasl/" title="iasl" class="md-nav__link">
      iasl
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/UefiBuild/NugetPublishing/Mu-Basetools-Win32/" title="Mu- Basetools- Win32" class="md-nav__link">
      Mu- Basetools- Win32
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/UefiBuild/NugetPublishing/Mu-Nasm/" title="Mu- Nasm" class="md-nav__link">
      Mu- Nasm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/UefiBuild/NugetPublishing/ReadMe/" title="Read Me" class="md-nav__link">
      Read Me
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-5-2" type="checkbox" id="nav-8-1-5-2">
    
    <label class="md-nav__link" for="nav-8-1-5-2">
      plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-1-5-2">
        plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/UefiBuild/plugin/FdSizeReport/ReadMe/" title="Fd Size Report" class="md-nav__link">
      Fd Size Report
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_basecore/UefiBuild/plugin/OverrideValidation/ReadMe/" title="Override Validation" class="md-nav__link">
      Override Validation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_oem_sample/ReadMe/" title="mu oem sample" class="md-nav__link">
      mu oem sample
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3" type="checkbox" id="nav-8-3" checked>
    
    <label class="md-nav__link" for="nav-8-3">
      mu plus
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-3">
        mu plus
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3-2" type="checkbox" id="nav-8-3-2">
    
    <label class="md-nav__link" for="nav-8-3-2">
      Dfci Pkg
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-3-2">
        Dfci Pkg
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DfciPkg/Dfci_Feature/" title="Dfci  Feature" class="md-nav__link">
      Dfci  Feature
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../DfciPkg/IdentityAndAuthManager/ReadMe/" title="Identity And Auth Manager" class="md-nav__link">
      Identity And Auth Manager
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../MsCapsuleUpdatePkg/readme/" title="Ms Capsule Update Pkg" class="md-nav__link">
      Ms Capsule Update Pkg
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3-4" type="checkbox" id="nav-8-3-4">
    
    <label class="md-nav__link" for="nav-8-3-4">
      Ms Core Pkg
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-3-4">
        Ms Core Pkg
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../MsCorePkg/ReadMe/" title="Read Me" class="md-nav__link">
      Read Me
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3-4-2" type="checkbox" id="nav-8-3-4-2">
    
    <label class="md-nav__link" for="nav-8-3-4-2">
      Library
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-3-4-2">
        Library
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../MsCorePkg/Library/DeviceStateLib/Readme/" title="Device State Lib" class="md-nav__link">
      Device State Lib
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Ms Sample Fmp Device Pkg
      </label>
    
    <a href="./" title="Ms Sample Fmp Device Pkg" class="md-nav__link md-nav__link--active">
      Ms Sample Fmp Device Pkg
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about" title="About" class="md-nav__link">
    About
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modulesdrivers" title="Modules/Drivers" class="md-nav__link">
    Modules/Drivers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sampledevicelibwrapperfmpinf" title="SampleDeviceLibWrapperFMP.inf" class="md-nav__link">
    SampleDeviceLibWrapperFMP.inf
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libraries" title="Libraries" class="md-nav__link">
    Libraries
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#samplefmpdevicelibinf" title="SampleFmpDeviceLib.inf" class="md-nav__link">
    SampleFmpDeviceLib.inf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsulekeybaselibinf" title="CapsuleKeyBaseLib.inf" class="md-nav__link">
    CapsuleKeyBaseLib.inf
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nt32pkgnt32pkgmscapsuledsc-nt32pkgnt32pkgmscapsulefdf-mssamplefmpdevicepkgmssamplefmpdevicepkgdsc-mssamplefmpdevicepkgmssamplefmpdevicepkgdec" title="Nt32Pkg\Nt32PkgMsCapsule.dsc, Nt32Pkg/Nt32PkgMsCapsule.fdf, MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dsc &amp; MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dec" class="md-nav__link">
    Nt32Pkg\Nt32PkgMsCapsule.dsc, Nt32Pkg/Nt32PkgMsCapsule.fdf, MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dsc &amp; MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dec
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps-to-build-successfully" title="Steps to Build Successfully" class="md-nav__link">
    Steps to Build Successfully
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-and-updating-capsules-from-uefi-shell" title="Loading and Updating Capsules from UEFI Shell" class="md-nav__link">
    Loading and Updating Capsules from UEFI Shell
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-windows-capsules" title="Creating Windows Capsules" class="md-nav__link">
    Creating Windows Capsules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copyright" title="Copyright" class="md-nav__link">
    Copyright
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3-6" type="checkbox" id="nav-8-3-6">
    
    <label class="md-nav__link" for="nav-8-3-6">
      Uefi Testing Pkg
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-3-6">
        Uefi Testing Pkg
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../UefiTestingPkg/Readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3-6-2" type="checkbox" id="nav-8-3-6-2">
    
    <label class="md-nav__link" for="nav-8-3-6-2">
      Audit Tests
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-3-6-2">
        Audit Tests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../UefiTestingPkg/AuditTests/PagingAudit/" title="Paging Audit" class="md-nav__link">
      Paging Audit
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3-6-3" type="checkbox" id="nav-8-3-6-3">
    
    <label class="md-nav__link" for="nav-8-3-6-3">
      Functional System Tests
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-3-6-3">
        Functional System Tests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../UefiTestingPkg/FunctionalSystemTests/HeapGuardTest/Readme/" title="Heap Guard Test" class="md-nav__link">
      Heap Guard Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../UefiTestingPkg/FunctionalSystemTests/SmmPagingProtectionsTest/Readme/" title="Smm Paging Protections Test" class="md-nav__link">
      Smm Paging Protections Test
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../XmlSupportPkg/ReadMe/" title="Xml Support Pkg" class="md-nav__link">
      Xml Support Pkg
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_silicon_arm_tiano/Readme/" title="mu silicon arm tiano" class="md-nav__link">
      mu silicon arm tiano
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-5" type="checkbox" id="nav-8-5">
    
    <label class="md-nav__link" for="nav-8-5">
      mu silicon intel tiano
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-5">
        mu silicon intel tiano
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_silicon_intel_tiano/Readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-5-2" type="checkbox" id="nav-8-5-2">
    
    <label class="md-nav__link" for="nav-8-5-2">
      Intel Silicon Pkg
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-5-2">
        Intel Silicon Pkg
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-5-2-1" type="checkbox" id="nav-8-5-2-1">
    
    <label class="md-nav__link" for="nav-8-5-2-1">
      Feature
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-5-2-1">
        Feature
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-5-2-1-1" type="checkbox" id="nav-8-5-2-1-1">
    
    <label class="md-nav__link" for="nav-8-5-2-1-1">
      Capsule
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-8-5-2-1-1">
        Capsule
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_silicon_intel_tiano/IntelSiliconPkg/Feature/Capsule/MicrocodeCapsulePdb/Readme/" title="Microcode Capsule Pdb" class="md-nav__link">
      Microcode Capsule Pdb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_silicon_intel_tiano/IntelSiliconPkg/Feature/Capsule/MicrocodeCapsuleTxt/Readme/" title="Microcode Capsule Txt" class="md-nav__link">
      Microcode Capsule Txt
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-6" type="checkbox" id="nav-8-6">
    
    <label class="md-nav__link" for="nav-8-6">
      mu tiano plus
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-6">
        mu tiano plus
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_tiano_plus/Readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-6-2" type="checkbox" id="nav-8-6-2">
    
    <label class="md-nav__link" for="nav-8-6-2">
      Crypto Pkg
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-6-2">
        Crypto Pkg
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-6-2-1" type="checkbox" id="nav-8-6-2-1">
    
    <label class="md-nav__link" for="nav-8-6-2-1">
      Library
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-6-2-1">
        Library
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-6-2-1-1" type="checkbox" id="nav-8-6-2-1-1">
    
    <label class="md-nav__link" for="nav-8-6-2-1-1">
      Openssl Lib
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-8-6-2-1-1">
        Openssl Lib
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-6-2-1-1-1" type="checkbox" id="nav-8-6-2-1-1-1">
    
    <label class="md-nav__link" for="nav-8-6-2-1-1-1">
      openssl
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-8-6-2-1-1-1">
        openssl
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_tiano_plus/CryptoPkg/Library/OpensslLib/openssl/fuzz/" title="fuzz" class="md-nav__link">
      fuzz
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_tiano_plus/CryptoPkg/Library/OpensslLib/openssl/test/README.ssltest/" title="test" class="md-nav__link">
      test
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-6-2-2" type="checkbox" id="nav-8-6-2-2">
    
    <label class="md-nav__link" for="nav-8-6-2-2">
      Unit Tests
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-8-6-2-2">
        Unit Tests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_tiano_plus/CryptoPkg/UnitTests/VerifyPkcs7EkuUnitTestApp/readme/" title="Verify Pkcs7 Eku Unit Test App" class="md-nav__link">
      Verify Pkcs7 Eku Unit Test App
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mu_tiano_plus/SignedCapsulePkg/Readme/" title="Signed Capsule Pkg" class="md-nav__link">
      Signed Capsule Pkg
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about" title="About" class="md-nav__link">
    About
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modulesdrivers" title="Modules/Drivers" class="md-nav__link">
    Modules/Drivers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sampledevicelibwrapperfmpinf" title="SampleDeviceLibWrapperFMP.inf" class="md-nav__link">
    SampleDeviceLibWrapperFMP.inf
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libraries" title="Libraries" class="md-nav__link">
    Libraries
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#samplefmpdevicelibinf" title="SampleFmpDeviceLib.inf" class="md-nav__link">
    SampleFmpDeviceLib.inf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsulekeybaselibinf" title="CapsuleKeyBaseLib.inf" class="md-nav__link">
    CapsuleKeyBaseLib.inf
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nt32pkgnt32pkgmscapsuledsc-nt32pkgnt32pkgmscapsulefdf-mssamplefmpdevicepkgmssamplefmpdevicepkgdsc-mssamplefmpdevicepkgmssamplefmpdevicepkgdec" title="Nt32Pkg\Nt32PkgMsCapsule.dsc, Nt32Pkg/Nt32PkgMsCapsule.fdf, MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dsc &amp; MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dec" class="md-nav__link">
    Nt32Pkg\Nt32PkgMsCapsule.dsc, Nt32Pkg/Nt32PkgMsCapsule.fdf, MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dsc &amp; MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dec
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps-to-build-successfully" title="Steps to Build Successfully" class="md-nav__link">
    Steps to Build Successfully
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-and-updating-capsules-from-uefi-shell" title="Loading and Updating Capsules from UEFI Shell" class="md-nav__link">
    Loading and Updating Capsules from UEFI Shell
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-windows-capsules" title="Creating Windows Capsules" class="md-nav__link">
    Creating Windows Capsules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copyright" title="Copyright" class="md-nav__link">
    Copyright
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/microsoft/mu/edit/master/docs/dyn/mu_plus/MsSampleFmpDevicePkg/readme.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="sample-drivers-libraries-and-tools-for-the-capsule-update-feature">Sample Drivers, Libraries and Tools for the Capsule Update Feature<a class="headerlink" href="#sample-drivers-libraries-and-tools-for-the-capsule-update-feature" title="Permanent link">&para;</a></h1>
<h2 id="about">About<a class="headerlink" href="#about" title="Permanent link">&para;</a></h2>
<p><strong>MsSampleFmpDevicePkg</strong> Package is an environment that provides:</p>
<ol>
<li>Sample FMP wrapper driver</li>
<li>Sample FMP library instance</li>
<li>Tools for generating GUIDs, keys, certificates and sample capsules</li>
<li>Dummy capsule payload and tools for loading capsules from UEFI shell</li>
<li>Sample nt32 DSC and FDF files for the build containing capsule update feature</li>
</ol>
<p>Note: this package provides tools and sample FMP driver and library.  No actual device firmware is updated or attempted to be updated by this implementation.</p>
<h2 id="modulesdrivers">Modules/Drivers<a class="headerlink" href="#modulesdrivers" title="Permanent link">&para;</a></h2>
<h3 id="sampledevicelibwrapperfmpinf">SampleDeviceLibWrapperFMP.inf<a class="headerlink" href="#sampledevicelibwrapperfmpinf" title="Permanent link">&para;</a></h3>
<p>Implementation: MsSampleFmpDevicePkg\SampleDeviceLibWrapperFmpDxeDriver</p>
<p>A sample FMP wrapper driver.</p>
<p>A device in the system may implement its own FMP wrapper driver, which installs Firmware Management Protocol (FMP) for this device.</p>
<p>In a scalable FMP architecture, there are one or more FMP wrapper drivers (e.g., for UEFI, ME, FW, etc.), each referring to its own FMP library instance, Device GUID, Device Name, Lowest Supported Version and update progress display color in the DSC file.
These drivers may be included in the FDF file.</p>
<h2 id="libraries">Libraries<a class="headerlink" href="#libraries" title="Permanent link">&para;</a></h2>
<h3 id="samplefmpdevicelibinf">SampleFmpDeviceLib.inf<a class="headerlink" href="#samplefmpdevicelibinf" title="Permanent link">&para;</a></h3>
<p>LIBRARY_CLASS: <code class="codehilite">FmpDeviceLib</code></p>
<p>Definition: MsCapsuleUpdatePkg\Include\Library\FmpDeviceLib.h</p>
<p>Implementation: MsSampleFmpDevicePkg\Library\SampleFmpDeviceLib.inf</p>
<p>Implements a sample FMP instance included by the SampleDeviceLibWrapperFMP.inf driver above.</p>
<p>This library defines a set of functions called by MsCapsuleUpdatePkg FmpWrapperDeviceLib.inf library, which in turn is included by FMP wrapper drivers.  Each FMP wrapper driver will include a unique FMP library instance.</p>
<p>Following is an example of relationship between an FMP driver and libraries:</p>
<div class="codehilite"><pre><span></span><span class="n">SampleDeviceLibWrapperFMP</span><span class="p">.</span><span class="n">inf</span>   <span class="p">(</span><span class="n">FMP</span> <span class="n">driver</span> <span class="n">which</span> <span class="n">is</span> <span class="n">just</span> <span class="n">a</span> <span class="n">wrapper</span><span class="p">)</span>
           <span class="o">|</span>
           <span class="n">v</span>
<span class="n">FmpWrapperDeviceLib</span><span class="p">.</span><span class="n">inf</span>         <span class="p">(</span><span class="n">MsCapsuleUpdatePkg</span> <span class="n">common</span><span class="o">-</span><span class="n">code</span> <span class="n">library</span> <span class="n">included</span> <span class="n">by</span> <span class="n">the</span> <span class="n">FMP</span> <span class="n">driver</span><span class="p">)</span>
           <span class="o">|</span>
           <span class="n">v</span>
<span class="n">SampleFmpDeviceLib</span><span class="p">.</span><span class="n">inf</span>          <span class="p">(</span><span class="n">FMP</span> <span class="n">instance</span> <span class="n">unique</span> <span class="n">to</span> <span class="n">this</span> <span class="n">FMP</span> <span class="n">driver</span> <span class="n">and</span> <span class="n">implements</span> <span class="n">all</span> <span class="n">the</span> <span class="n">required</span> <span class="n">hooks</span><span class="p">)</span>
</pre></div>

<h3 id="capsulekeybaselibinf">CapsuleKeyBaseLib.inf<a class="headerlink" href="#capsulekeybaselibinf" title="Permanent link">&para;</a></h3>
<p>LIBRARY_CLASS: <code class="codehilite">CapsuleKeyLib</code></p>
<p>Definition: MsCapsuleUpdatePkg\Include\Library\CapsuleKeyLib.h</p>
<p>Implementation: MsSampleFmpDevicePkg\Library\CapsuleKeyBaseLib</p>
<p>Contains public key certificates used for authenticating development and/or production capsules.</p>
<h2 id="nt32pkgnt32pkgmscapsuledsc-nt32pkgnt32pkgmscapsulefdf-mssamplefmpdevicepkgmssamplefmpdevicepkgdsc-mssamplefmpdevicepkgmssamplefmpdevicepkgdec">Nt32Pkg\Nt32PkgMsCapsule.dsc, Nt32Pkg/Nt32PkgMsCapsule.fdf, MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dsc &amp; MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dec<a class="headerlink" href="#nt32pkgnt32pkgmscapsuledsc-nt32pkgnt32pkgmscapsulefdf-mssamplefmpdevicepkgmssamplefmpdevicepkgdsc-mssamplefmpdevicepkgmssamplefmpdevicepkgdec" title="Permanent link">&para;</a></h2>
<p>Nt32PkgMsCapsule.dsc points to Nt32Pkg\Nt32PkgMsCapsule.fdf, links all the required libraries for <code class="codehilite">MsCapsuleUpdatePkg</code>, compiles SampleDeviceLibWrapperFMP.inf, EfiSystemResourceTableDxe.inf and BootGraphicsResourceTableDxe.inf drivers and sets <code class="codehilite">gEfiMdeModulePkgTokenSpaceGuid.PcdTestKeyUsed</code> accordingly.  Each FMP wrapper driver including SampleDeviceLibWrapperFMP.inf will refer to its own FMP library instance, Device GUID, Device Name, Lowest Supported Version, update progress display color and whether system reset is required after the device update (an example shown below).</p>
<p>Nt32PkgMsCapsule.fdf include SampleDeviceLibWrapperFMP.inf, EfiSystemResourceTableDxe.inf and BootGraphicsResourceTableDxe.inf drivers in the final firmware image.</p>
<p>MsSampleFmpDevicePkg.dsc links all the required libraries for <code class="codehilite">MsSampleFmpDevicePkg</code> and <code class="codehilite">MsCapsuleUpdatePkg</code> and compiles SampleDeviceLibWrapperFMP.inf driver.  Each FMP wrapper driver including SampleDeviceLibWrapperFMP.inf will refer to its own FMP library instance, Device GUID, Device Name, Lowest Supported Version, update progress display color and whether system reset is required after the device update (an example shown below).</p>
<p>MsSampleFmpDevicePkg.dec lists of the libraries, GUIDs and PCDs used in the <code class="codehilite">MsSampleFmpDevicePkg</code>.</p>
<p>An example of an FMP wrapper driver including SampleDeviceLibWrapperFMP.inf in the DSC file:</p>
<div class="codehilite"><pre><span></span><span class="n">MsSampleFmpDevicePkg</span><span class="o">/</span><span class="n">SampleDeviceLibWrapperFmpDxeDriver</span><span class="o">/</span><span class="n">SampleDeviceLibWrapperFMP</span><span class="o">.</span><span class="n">inf</span> <span class="p">{</span>
<span class="o">&lt;</span><span class="n">LibraryClasses</span><span class="o">&gt;</span>
  <span class="n">FmpDeviceLib</span><span class="o">|</span><span class="n">MsSampleFmpDevicePkg</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">SampleFmpDeviceLib</span><span class="o">/</span><span class="n">SampleFmpDeviceLib</span><span class="o">.</span><span class="n">inf</span>
<span class="o">&lt;</span><span class="n">PcdsFixedAtBuild</span><span class="o">&gt;</span>
  <span class="n">gMsCapsuleUpdatePkgTokenSpaceGuid</span><span class="o">.</span><span class="n">PcdDeviceLibWrapperDeviceImageName</span><span class="o">|</span><span class="n">L</span><span class="s2">&quot;Sample Device FMP&quot;</span>
  <span class="c1">#set Lowest supported version</span>
  <span class="n">gMsCapsuleUpdatePkgTokenSpaceGuid</span><span class="o">.</span><span class="n">PcdBuildTimeLowestSupportedVersion</span><span class="o">|</span><span class="mh">0x0</span> <span class="c1">#0.0.0</span>
  <span class="c1">#set to White (RGB) (255, 255, 255)</span>
  <span class="n">gMsCapsuleUpdatePkgTokenSpaceGuid</span><span class="o">.</span><span class="n">PcdProgressColor</span><span class="o">|</span><span class="mh">0xFFFFFFFF</span>
  <span class="c1">#Take note - GUIDs/UUIDs have different formatting.  To get them all align can be challenging.</span>
  <span class="c1">#When doing byte array the last 8 bytes are MSB while the previous bytes are in LSB</span>
  <span class="c1">#UUID HEX FMT:   11223344-5566-7788-99AA-BBCCDDEEFF00   for EV2</span>
  <span class="c1">#gMsCapsuleUpdatePkgTokenSpaceGuid.PcdDeviceLibWrapperDeviceGuid|{0x44, 0x33, 0x22, 0x11, 0x66, 0x55, 0x88, 0x77, 0x99, 0xAA, 0xBB, 0xCC, 0xDD, 0xEE, 0xFF, 0x00}</span>
  <span class="c1">#Populate GUID (from MsSampleFmpDevicePkg\Tools\Guid.txt) below as per the example above</span>
  <span class="c1">#UUID HEX FMT:   ########-####-####-####-############   for &gt;=EV2.5</span>
  <span class="n">gMsCapsuleUpdatePkgTokenSpaceGuid</span><span class="o">.</span><span class="n">PcdDeviceLibWrapperDeviceGuid</span><span class="o">|</span><span class="p">{</span><span class="mi">0</span><span class="n">x</span><span class="c1">##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##, 0x##}</span>
<span class="o">&lt;</span><span class="n">PcdsFeatureFlag</span><span class="o">&gt;</span>
  <span class="n">gMsCapsuleUpdatePkgTokenSpaceGuid</span><span class="o">.</span><span class="n">PcdDeviceLibWrapperSystemResetRequired</span><span class="o">|</span><span class="n">TRUE</span>
<span class="p">}</span>
</pre></div>

<h2 id="steps-to-build-successfully">Steps to Build Successfully<a class="headerlink" href="#steps-to-build-successfully" title="Permanent link">&para;</a></h2>
<p>Note: all sample tools provided in MsSampleFmpDevicePkg\Tools should not be used in production environments.</p>
<ol>
<li>Change directory to MsSampleFmpDevicePkg\Tools</li>
<li>Run MakeCert.bat to create private keys (<em>.pfx) and public key certificates (</em>.cer)</li>
<li>Run ConvertCerToH.py to create Certs.h</li>
<li>Copy Certs.h to MsSampleFmpDevicePkg\Library\CapsuleKeyBaseLib</li>
<li>Run GenerateGuid.py to generate a GUID in Guid.txt</li>
<li>Replace #s in Nt32Pkg\Nt32PkgMsCapsule.dsc and MsSampleFmpDevicePkg\MsSampleFmpDevicePkg.dsc by GUID in Guid.txt</li>
<li>Run CapsuleGeneratorDevelopment.bat to create sample development capsule (*.cap)</li>
<li>Run CapsuleGeneratorProduction.bat to create sample production capsule (*.cap)</li>
<li>Configure environment variables as necessary</li>
<li>Build with nt32 DSC file above (example: build -p Nt32PkgMsCapsule.dsc)</li>
</ol>
<h2 id="loading-and-updating-capsules-from-uefi-shell">Loading and Updating Capsules from UEFI Shell<a class="headerlink" href="#loading-and-updating-capsules-from-uefi-shell" title="Permanent link">&para;</a></h2>
<p>After booting nt32 platform (Nt32PkgMsCapsule.dsc) to UEFI shell, the capsules generated above can be loaded and updated in UEFI shell by MsSampleFmpDevicePkg\Tools\IA32\FMPTestApp.efi.</p>
<p>Example: fs0:&gt;FMPTestApp.efi -l -c 3rdPartyProductionCapsule.cap</p>
<p>Option -l above is required when using MsCapsuleUpdatePkg <code class="codehilite">DisplayUpdateProgressGraphicsLib</code> library in the nt32 platform.  This option displays the logo first and then displays the update progress bar relative to that logo. </p>
<p>In order for these capsules to work successfully in nt32 platform, the capsules generated above do not set <code class="codehilite">CAPSULE_FLAGS_PERSIST_ACROSS_RESET</code> or <code class="codehilite">CAPSULE_FLAGS_INITIATE_RESET</code> flags and thus do not require warm reset.  For production systems, these flags may need to be set (see the capsule generating batch files for more info).</p>
<h2 id="creating-windows-capsules">Creating Windows Capsules<a class="headerlink" href="#creating-windows-capsules" title="Permanent link">&para;</a></h2>
<p>Windows capsules can be created by running MsSampleFmpDevicePkg\Tools\CreateWindowsCapsule.py tool (which uses CreateWindowsInf.py).  Windows capsule files (*.inf, *.cat and <em>.cap/</em>.bin) are created in MsSampleFmpDevicePkg\Tools\WindowsCapsule folder.</p>
<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h2>
<p>Following are the limitations of this implementation:
1.  When using nt32 platform, the capsules cannot be tested on the next reboot (see above for more info).</p>
<h2 id="copyright">Copyright<a class="headerlink" href="#copyright" title="Permanent link">&para;</a></h2>
<p>Copyright &copy; 2017, Microsoft Corporation</p>
<p>All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</p>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../MsCorePkg/Library/DeviceStateLib/Readme/" title="Device State Lib" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Device State Lib
              </span>
            </div>
          </a>
        
        
          <a href="../../UefiTestingPkg/Readme/" title="Readme" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Readme
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright (c) Microsoft.  All rights reserved
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
    
      
    
  </body>
</html>